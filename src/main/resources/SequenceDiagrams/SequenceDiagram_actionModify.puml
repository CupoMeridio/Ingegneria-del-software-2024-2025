@startuml
actor Utente
participant ContactsbookViewController
participant ModifyViewController
participant "Contatto" as Contact
participant DuplicateContactViewController
participant UserInteractionDataInterface


Utente -> ContactsbookViewController: actionModify
activate ContactsbookViewController
ContactsbookViewController->ModifyViewController: setContact
activate ModifyViewController
ContactsbookViewController->ModifyViewController: setObservableList
ModifyViewController -> ModifyViewController: actionModify
ModifyViewController->Contact: new
activate Contact
Contact-->ModifyViewController: contact
deactivate Contact
ModifyViewController->ContactsbookViewController: contains
ContactsbookViewController-->ModifyViewController
alt Contatto duplicato
    ModifyViewController -> DuplicateContactViewController: gestisciContattoDuplicato
    activate DuplicateContactViewController
    alt Add contact
        DuplicateContactViewController->ModifyViewController
    activate ModifyViewController
    else Modify
        DuplicateContactViewController-->ModifyViewController
        ModifyViewController->ModifyViewController:actionModify
    end
    deactivate DuplicateContactViewController 
else Contatto non duplicato
ModifyViewController->ModifyViewController: remove
ModifyViewController->ModifyViewController: add
ModifyViewController-->UserInteractionDataInterface: modifyContact
activate UserInteractionDataInterface
deactivate ModifyViewController
deactivate UserInteractionDataInterface
ModifyViewController-->ContactsbookViewController
deactivate ContactsbookViewController
@enduml 